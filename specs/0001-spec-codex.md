# 梦幻西游交易贴吧 - 需求与设计文档

## 1. 项目概述

本项目包含 H5 移动端、PC 端与后台管理系统三套前端应用，面向《梦幻西游》玩家提供交易贴吧服务。用户可发布装备/账号交易帖子，进行浏览、关注、点赞、联系卖家，并通过积分体系参与互动；后台管理系统对内容与联系申请进行审核。

## 2. 技术选型（最新版本）

以下版本以“撰写文档时的最新稳定版本”为基准，实际落地需在实施阶段确认并锁定：

- 移动端：React 最新稳定版 + Zustand 最新稳定版 + Ant Design Mobile 最新稳定版 + Tailwind CSS 最新稳定版
- PC 端：React 最新稳定版 + Zustand 最新稳定版 + Ant Design 最新稳定版 + Tailwind CSS 最新稳定版
- 后台管理：React 最新稳定版 + Zustand 最新稳定版 + Ant Design 最新稳定版 + Tailwind CSS 最新稳定版

统一规范：
- TypeScript 推荐启用（若已有约定可保持现状）
- Router 与数据请求库可在实施阶段确认（如 React Router、TanStack Query）
- 统一 UI 设计规范与组件复用策略

## 3. 角色与权限

### 3.1 角色
- 游客：可浏览帖子、搜索、查看公开信息
- 注册用户：可发布、编辑、回复自己的帖子，可申请联系、积分操作、通知查看
- 管理员：后台审核、内容管理、用户管理、积分规则配置

### 3.2 权限要点
- 只有帖子作者可编辑自己的帖子
- 只有帖子作者可回复自己的帖子
- 联系方式申请需要审核通过后才可发送
- 帖子与回复必须审核通过才对外展示

## 4. 业务目标与范围

### 4.1 目标
- 提供安全、可审核的交易内容发布与沟通渠道
- 用积分驱动互动与内容质量
- 通过后台审核降低诈骗或违规风险

### 4.2 不在范围（可作为后续拓展）
- 支付与担保交易
- 站内即时聊天
- 第三方实名认证

## 5. 功能需求

### 5.1 注册与登录
- 手机号注册、登录
- 注册时发送短信验证码
- 验证码防刷机制与频率限制
- 登录态保持与多端兼容

### 5.2 个人信息管理
- 头像、昵称、联系方式（如 QQ、微信、电话）
- 修改密码、绑定手机
- 隐私设置：默认隐藏联系方式，需通过申请解锁

### 5.3 积分体系
- 积分获取：发帖、被点赞、被关注、被审核通过等
- 积分消耗：申请联系、置顶/刷新帖子等（规则可配置）
- 积分流水与明细
- 管理端可配置积分规则与开关

### 5.4 帖子管理（发帖/编辑/回复）
- 发布装备/账号交易帖
- 帖子类型：装备、账号（可扩展）
- 内容字段：标题、正文、价格区间、区服、角色信息、截图等
- 编辑与删除：仅作者可编辑或删除
- 回复：仅作者可回复自己的帖子（用于补充/说明）

### 5.5 浏览与互动
- 列表浏览：最新、热门、精选
- 搜索：支持关键词、分类、标签、区服等
- 关注：用户可关注帖子或作者
- 点赞：对帖子进行点赞
- 收藏：收藏交易帖

### 5.6 联系方式申请
- 申请流程：用户选择感兴趣帖子 -> 提交申请理由 -> 扣除积分
- 审核流程：管理员审核通过后发送给作者
- 作者查看申请并决定是否提供联系方式（可作为扩展）

### 5.7 通知中心
- 系统通知：审核结果、积分变动、申请状态
- 互动通知：点赞、关注、收藏、回复
- 通知状态：未读/已读

### 5.8 后台管理系统
覆盖前台所有功能的管理与配置，并新增：
- 内容审核：帖子、回复、联系方式申请
- 用户管理：封禁、禁言、积分调整
- 内容管理：推荐、置顶、删除
- 规则配置：积分规则、敏感词、审核策略
- 数据统计：发帖数、活跃度、审核通过率

## 6. 业务流程设计

### 6.1 发帖与审核流程
1) 用户提交帖子
2) 进入审核队列
3) 审核通过后展示
4) 审核拒绝则通知用户并允许修改重提

### 6.2 回复流程
1) 作者发布回复
2) 进入审核队列
3) 审核通过后展示

### 6.3 联系方式申请流程
1) 申请方提交申请并扣除积分
2) 管理端审核
3) 通过后通知作者并记录状态
4) 系统通知申请方结果

## 7. 数据模型设计（概念层）

### 7.1 用户
- id、手机号、昵称、头像、联系方式
- 积分余额、注册时间、状态

### 7.2 帖子
- id、作者 id、类型、标题、正文
- 价格、区服、标签、图片
- 状态：草稿/审核中/已发布/拒绝
- 统计：点赞、关注、收藏、浏览

### 7.3 回复
- id、帖子 id、作者 id
- 内容、状态、时间

### 7.4 联系申请
- id、帖子 id、申请人 id、理由
- 状态：审核中/通过/拒绝
- 积分消耗记录

### 7.5 积分流水
- id、用户 id、类型、变更值、描述、时间

### 7.6 通知
- id、接收用户 id、类型、内容、状态
- 关联业务 id

## 8. 信息架构与页面设计

### 8.1 移动端（H5）
- 注册/登录
- 首页（推荐/最新/搜索）
- 帖子详情
- 发帖与编辑
- 个人中心（资料、积分、通知）
- 申请联系入口

### 8.2 PC 端
- 首页（分类 + 搜索 + 列表）
- 帖子详情
- 发帖/编辑
- 个人中心
- 通知中心

### 8.3 后台管理
- 登录页
- 审核中心（帖子/回复/联系申请）
- 内容管理（置顶/推荐/下架）
- 用户管理
- 积分规则配置
- 统计报表

## 9. UI 与交互原则

- 交易信息突出关键字段（价格、区服、类型）
- 显示审核状态与通知入口
- 提示积分变化与使用场景
- 联系方式申请清晰展示规则与扣分信息

## 10. 非功能性需求

### 10.1 性能
- 列表分页与懒加载
- 图片压缩与 CDN（实施阶段确认）

### 10.2 安全
- 短信验证码防刷
- 内容审核与敏感词过滤
- 防止联系方式直接暴露

### 10.3 可用性
- 移动端与 PC 端一致的业务逻辑
- 表单错误提示与引导

## 11. 审核策略

- 默认所有帖子、回复与联系申请进入审核队列
- 后台可配置“自动审核”与“人工审核”
- 审核通过才可对外展示或发送

## 12. 版本里程碑（建议）

### v0.1（MVP）
- 登录注册、发帖、审核、浏览、搜索、积分基础

### v0.2
- 联系申请、通知中心、后台配置

### v1.0
- 统计报表、规则系统完善、体验优化

## 13. 待确认问题

- 短信验证码接入供应商与费用策略
- 联系方式申请是否需要作者二次确认
- 积分规则具体配置项与默认值
- 违规内容处理与申诉流程
